# Generated by Django 5.2.8 on 2025-11-14 22:33

import django.contrib.postgres.fields
import django.core.validators
import django.db.models.deletion
import django.utils.timezone
import uuid
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('auth', '0012_alter_user_first_name_max_length'),
    ]

    operations = [
        migrations.CreateModel(
            name='AuditLog',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('model_name', models.CharField(db_index=True, max_length=100)),
                ('object_id', models.CharField(db_index=True, max_length=100)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name_plural': 'Counties',
                'ordering': ['model_name'],
            },
        ),
        migrations.CreateModel(
            name='CommunityUnit',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=200)),
                ('code', models.CharField(max_length=20, unique=True)),
                ('target_population', models.IntegerField(help_text='Expected catchment population')),
                ('target_households', models.IntegerField(blank=True, null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('established_date', models.DateField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
        ),
        migrations.CreateModel(
            name='County',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=100, unique=True)),
                ('code', models.CharField(max_length=10, unique=True)),
                ('population', models.IntegerField(blank=True, null=True)),
                ('contact_person', models.CharField(blank=True, max_length=200)),
                ('phone', models.CharField(blank=True, max_length=20)),
                ('email', models.EmailField(blank=True, max_length=254)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
        ),
        migrations.CreateModel(
            name='Facility',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=200)),
                ('facility_code', models.CharField(db_index=True, max_length=20, unique=True)),
                ('facility_type', models.CharField(choices=[('DISPENSARY', 'Dispensary'), ('HEALTH_CENTRE', 'Health Centre'), ('SUB_COUNTY_HOSPITAL', 'Sub-County Hospital'), ('COUNTY_REFERRAL', 'County Referral Hospital'), ('PRIVATE_CLINIC', 'Private Clinic')], max_length=30)),
                ('latitude', models.DecimalField(blank=True, decimal_places=7, max_digits=10, null=True)),
                ('longitude', models.DecimalField(blank=True, decimal_places=7, max_digits=10, null=True)),
                ('phone', models.CharField(blank=True, max_length=20)),
                ('email', models.EmailField(blank=True, max_length=254)),
                ('physical_address', models.TextField(blank=True)),
                ('is_operational', models.BooleanField(default=True)),
                ('bed_capacity', models.IntegerField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name_plural': 'Facilities',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='Role',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(choices=[('COUNTY_ADMIN', 'County Administrator'), ('PUBLIC_HEALTH_OFFICER', 'Public Health Officer'), ('ME_OFFICER', 'M&E Officer'), ('FACILITY_MANAGER', 'Facility Manager'), ('CLINICAL_OFFICER', 'Clinical Officer'), ('NURSE', 'Nurse'), ('LAB_TECH', 'Laboratory Technician'), ('PHARMACIST', 'Pharmacist'), ('DATA_CLERK', 'Data Clerk'), ('CHV', 'Community Health Volunteer'), ('CHEW', 'Community Health Extension Worker')], max_length=50, unique=True)),
                ('description', models.TextField(blank=True)),
                ('level', models.IntegerField(default=1, help_text='Higher level = more access')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
        ),
        migrations.CreateModel(
            name='Supplier',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=200)),
                ('supplier_code', models.CharField(max_length=50, unique=True)),
                ('contact_person', models.CharField(max_length=200)),
                ('phone', models.CharField(max_length=20)),
                ('email', models.EmailField(max_length=254)),
                ('physical_address', models.TextField()),
                ('kra_pin', models.CharField(blank=True, max_length=20)),
                ('is_active', models.BooleanField(default=True)),
                ('rating', models.DecimalField(blank=True, decimal_places=2, help_text='0-5 rating', max_digits=3, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
        ),
        migrations.CreateModel(
            name='User',
            fields=[
                ('password', models.CharField(max_length=128, verbose_name='password')),
                ('is_superuser', models.BooleanField(default=False, help_text='Designates that this user has all permissions without explicitly assigning them.', verbose_name='superuser status')),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('email', models.EmailField(max_length=254, unique=True)),
                ('phone', models.CharField(max_length=15, unique=True, validators=[django.core.validators.RegexValidator(message='Valid Kenyan phone format', regex='^\\+?254\\d{9}$')])),
                ('first_name', models.CharField(max_length=100)),
                ('last_name', models.CharField(max_length=100)),
                ('national_id', models.CharField(blank=True, db_index=True, max_length=20, null=True, unique=True)),
                ('is_active', models.BooleanField(default=True)),
                ('is_staff', models.BooleanField(default=False)),
                ('date_joined', models.DateTimeField(auto_now_add=True)),
                ('last_login', models.DateTimeField(blank=True, null=True)),
                ('groups', models.ManyToManyField(blank=True, help_text='The groups this user belongs to. A user will get all permissions granted to each of their groups.', related_name='user_set', related_query_name='user', to='auth.group', verbose_name='groups')),
                ('user_permissions', models.ManyToManyField(blank=True, help_text='Specific permissions for this user.', related_name='user_set', related_query_name='user', to='auth.permission', verbose_name='user permissions')),
                ('county', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='main_application.county')),
                ('roles', models.ManyToManyField(blank=True, related_name='users', to='main_application.role')),
            ],
        ),
        migrations.CreateModel(
            name='Commodity',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=200)),
                ('commodity_code', models.CharField(db_index=True, max_length=50, unique=True)),
                ('commodity_type', models.CharField(choices=[('MEDICINE', 'Medicine'), ('VACCINE', 'Vaccine'), ('SUPPLY', 'Medical Supply'), ('EQUIPMENT', 'Equipment'), ('REAGENT', 'Laboratory Reagent')], max_length=20)),
                ('generic_name', models.CharField(blank=True, max_length=200)),
                ('dosage_form', models.CharField(blank=True, max_length=50)),
                ('strength', models.CharField(blank=True, max_length=50)),
                ('unit_of_measure', models.CharField(help_text='Tablets/Vials/Boxes', max_length=20)),
                ('reorder_level', models.IntegerField(default=0)),
                ('ideal_stock_level', models.IntegerField(default=0)),
                ('is_essential', models.BooleanField(default=False)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name_plural': 'Commodities',
                'indexes': [models.Index(fields=['commodity_code', 'commodity_type'], name='main_applic_commodi_7e8f3c_idx')],
            },
        ),
        migrations.CreateModel(
            name='CommunityHealthVolunteer',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('national_id', models.CharField(db_index=True, max_length=20, unique=True)),
                ('chv_number', models.CharField(blank=True, max_length=20, unique=True)),
                ('date_of_birth', models.DateField()),
                ('gender', models.CharField(choices=[('M', 'Male'), ('F', 'Female'), ('O', 'Other')], max_length=10)),
                ('training_date', models.DateField(blank=True, null=True)),
                ('certification_date', models.DateField(blank=True, null=True)),
                ('certification_expiry', models.DateField(blank=True, null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('households_assigned', models.IntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='chv_profile', to=settings.AUTH_USER_MODEL)),
                ('community_unit', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='volunteers', to='main_application.communityunit')),
            ],
            options={
                'verbose_name': 'Community Health Volunteer',
            },
        ),
        migrations.AddField(
            model_name='communityunit',
            name='linked_facility',
            field=models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='community_units', to='main_application.facility'),
        ),
        migrations.CreateModel(
            name='Household',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('household_number', models.CharField(db_index=True, max_length=50, unique=True)),
                ('village', models.CharField(blank=True, max_length=100)),
                ('physical_address', models.TextField(blank=True)),
                ('latitude', models.DecimalField(blank=True, decimal_places=7, max_digits=10, null=True)),
                ('longitude', models.DecimalField(blank=True, decimal_places=7, max_digits=10, null=True)),
                ('number_of_members', models.IntegerField(default=1, validators=[django.core.validators.MinValueValidator(1)])),
                ('has_toilet', models.BooleanField(blank=True, null=True)),
                ('water_source', models.CharField(blank=True, max_length=50)),
                ('registration_date', models.DateField(default=django.utils.timezone.now)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('assigned_chv', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='assigned_households', to='main_application.communityhealthvolunteer')),
                ('community_unit', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='households', to='main_application.communityunit')),
            ],
        ),
        migrations.CreateModel(
            name='HouseholdVisit',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('visit_date', models.DateField()),
                ('visit_type', models.CharField(choices=[('ROUTINE', 'Routine Visit'), ('FOLLOW_UP', 'Follow-up'), ('REFERRAL_CHECK', 'Referral Follow-up'), ('EMERGENCY', 'Emergency')], max_length=20)),
                ('members_present', models.IntegerField(default=0)),
                ('services_provided', django.contrib.postgres.fields.ArrayField(base_field=models.CharField(max_length=100), blank=True, default=list, size=None)),
                ('findings', models.TextField(blank=True)),
                ('action_taken', models.TextField(blank=True)),
                ('referrals_made', models.IntegerField(default=0)),
                ('next_visit_date', models.DateField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('chv', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to='main_application.communityhealthvolunteer')),
                ('household', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='visits', to='main_application.household')),
            ],
            options={
                'ordering': ['-visit_date'],
            },
        ),
        migrations.CreateModel(
            name='LabTestOrder',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('order_number', models.CharField(max_length=50, unique=True)),
                ('order_date', models.DateTimeField(default=django.utils.timezone.now)),
                ('tests_requested', django.contrib.postgres.fields.ArrayField(base_field=models.CharField(max_length=100), help_text='List of test names/codes', size=None)),
                ('clinical_notes', models.TextField(blank=True)),
                ('priority', models.CharField(default='ROUTINE', max_length=20)),
                ('status', models.CharField(choices=[('PENDING', 'Pending'), ('SAMPLE_COLLECTED', 'Sample Collected'), ('IN_PROGRESS', 'In Progress'), ('COMPLETED', 'Completed'), ('CANCELLED', 'Cancelled')], default='PENDING', max_length=20)),
                ('sample_collection_date', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('facility', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='lab_orders', to='main_application.facility')),
                ('ordered_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='lab_orders_made', to=settings.AUTH_USER_MODEL)),
                ('sample_collected_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='samples_collected', to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='LabResult',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('test_name', models.CharField(max_length=100)),
                ('test_code', models.CharField(blank=True, max_length=50)),
                ('result_value', models.CharField(max_length=200)),
                ('unit', models.CharField(blank=True, max_length=50)),
                ('reference_range', models.CharField(blank=True, max_length=100)),
                ('result_status', models.CharField(help_text='Normal/Abnormal/Critical', max_length=20)),
                ('test_date', models.DateTimeField()),
                ('verification_date', models.DateTimeField(blank=True, null=True)),
                ('attachments', models.JSONField(blank=True, default=list, help_text='S3 URLs')),
                ('notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('tested_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='tests_performed', to=settings.AUTH_USER_MODEL)),
                ('verified_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='results_verified', to=settings.AUTH_USER_MODEL)),
                ('lab_order', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='results', to='main_application.labtestorder')),
            ],
        ),
        migrations.CreateModel(
            name='OutreachEvent',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=200)),
                ('event_type', models.CharField(choices=[('IMMUNIZATION', 'Mass Immunization'), ('SCREENING', 'Health Screening'), ('EDUCATION', 'Health Education'), ('DEWORMING', 'Deworming Campaign'), ('NUTRITION', 'Nutrition Program')], max_length=30)),
                ('start_date', models.DateField()),
                ('end_date', models.DateField()),
                ('location', models.CharField(max_length=200)),
                ('target_population', models.IntegerField()),
                ('people_reached', models.IntegerField(default=0)),
                ('partners', models.TextField(blank=True, help_text='Partner organizations')),
                ('services_offered', django.contrib.postgres.fields.ArrayField(base_field=models.CharField(max_length=100), blank=True, default=list, size=None)),
                ('commodities_used', models.JSONField(blank=True, default=dict)),
                ('budget', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('actual_cost', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('report', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('organizing_facility', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to='main_application.facility')),
            ],
        ),
        migrations.CreateModel(
            name='Person',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('first_name', models.CharField(max_length=100)),
                ('middle_name', models.CharField(blank=True, max_length=100)),
                ('last_name', models.CharField(max_length=100)),
                ('date_of_birth', models.DateField()),
                ('gender', models.CharField(choices=[('M', 'Male'), ('F', 'Female'), ('O', 'Other')], max_length=1)),
                ('national_id', models.CharField(blank=True, db_index=True, max_length=20, null=True, unique=True)),
                ('nhif_number', models.CharField(blank=True, db_index=True, max_length=20)),
                ('birth_certificate_number', models.CharField(blank=True, max_length=50)),
                ('phone', models.CharField(blank=True, max_length=15)),
                ('alternate_phone', models.CharField(blank=True, max_length=15)),
                ('is_household_head', models.BooleanField(default=False)),
                ('blood_group', models.CharField(blank=True, max_length=5)),
                ('chronic_conditions', django.contrib.postgres.fields.ArrayField(base_field=models.CharField(max_length=100), blank=True, default=list, size=None)),
                ('allergies', models.TextField(blank=True)),
                ('is_alive', models.BooleanField(default=True)),
                ('date_of_death', models.DateField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('household', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='members', to='main_application.household')),
            ],
            options={
                'verbose_name_plural': 'People',
            },
        ),
        migrations.AddField(
            model_name='labtestorder',
            name='patient',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='lab_orders', to='main_application.person'),
        ),
        migrations.CreateModel(
            name='ImmunizationRecord',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('vaccine_name', models.CharField(max_length=100)),
                ('vaccine_code', models.CharField(max_length=20)),
                ('dose_number', models.IntegerField()),
                ('administration_date', models.DateField()),
                ('batch_number', models.CharField(blank=True, max_length=50)),
                ('expiry_date', models.DateField(blank=True, null=True)),
                ('site', models.CharField(blank=True, help_text='Administration site', max_length=50)),
                ('adverse_reaction', models.TextField(blank=True)),
                ('next_dose_date', models.DateField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('administered_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('facility', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to='main_application.facility')),
                ('child', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='immunizations', to='main_application.person')),
            ],
            options={
                'ordering': ['child', 'administration_date'],
            },
        ),
        migrations.CreateModel(
            name='PregnancyRecord',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('lmp_date', models.DateField(help_text='Last Menstrual Period')),
                ('edd', models.DateField(help_text='Estimated Delivery Date')),
                ('gravida', models.IntegerField(help_text='Total pregnancies')),
                ('parity', models.IntegerField(help_text='Number of births')),
                ('risk_factors', django.contrib.postgres.fields.ArrayField(base_field=models.CharField(max_length=100), blank=True, default=list, size=None)),
                ('is_high_risk', models.BooleanField(default=False)),
                ('anc_visits_completed', models.IntegerField(default=0)),
                ('delivery_date', models.DateField(blank=True, null=True)),
                ('delivery_outcome', models.CharField(blank=True, max_length=50)),
                ('is_active', models.BooleanField(default=True)),
                ('notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('delivery_facility', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='main_application.facility')),
                ('woman', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='pregnancies', to='main_application.person')),
            ],
        ),
        migrations.CreateModel(
            name='ANCVisit',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('visit_number', models.IntegerField()),
                ('visit_date', models.DateField()),
                ('gestation_weeks', models.IntegerField()),
                ('weight', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('blood_pressure', models.CharField(blank=True, max_length=20)),
                ('hemoglobin', models.DecimalField(blank=True, decimal_places=1, max_digits=4, null=True)),
                ('tests_done', django.contrib.postgres.fields.ArrayField(base_field=models.CharField(max_length=50), blank=True, default=list, size=None)),
                ('supplements_given', django.contrib.postgres.fields.ArrayField(base_field=models.CharField(max_length=50), blank=True, default=list, size=None)),
                ('next_visit_date', models.DateField(blank=True, null=True)),
                ('notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('attended_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('facility', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to='main_application.facility')),
                ('pregnancy', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='anc_visits', to='main_application.pregnancyrecord')),
            ],
            options={
                'ordering': ['pregnancy', 'visit_number'],
            },
        ),
        migrations.CreateModel(
            name='ProcurementRequest',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('request_number', models.CharField(max_length=50, unique=True)),
                ('request_date', models.DateField(default=django.utils.timezone.now)),
                ('items', models.JSONField(default=list, help_text='List of {commodity_id, quantity, justification}')),
                ('justification', models.TextField()),
                ('priority', models.CharField(default='NORMAL', max_length=20)),
                ('status', models.CharField(choices=[('DRAFT', 'Draft'), ('SUBMITTED', 'Submitted'), ('APPROVED', 'Approved'), ('REJECTED', 'Rejected'), ('ORDERED', 'Ordered'), ('DELIVERED', 'Delivered')], default='DRAFT', max_length=20)),
                ('review_date', models.DateTimeField(blank=True, null=True)),
                ('review_notes', models.TextField(blank=True)),
                ('approval_date', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='approved_requests', to=settings.AUTH_USER_MODEL)),
                ('facility', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='procurement_requests', to='main_application.facility')),
                ('requested_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('reviewed_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='reviewed_requests', to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='Program',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=200)),
                ('code', models.CharField(max_length=20, unique=True)),
                ('description', models.TextField()),
                ('start_date', models.DateField()),
                ('end_date', models.DateField(blank=True, null=True)),
                ('budget', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('county', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='programs', to='main_application.county')),
                ('program_manager', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='managed_programs', to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='Indicator',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=200)),
                ('code', models.CharField(max_length=50, unique=True)),
                ('indicator_type', models.CharField(choices=[('INPUT', 'Input'), ('OUTPUT', 'Output'), ('OUTCOME', 'Outcome'), ('IMPACT', 'Impact')], max_length=20)),
                ('definition', models.TextField()),
                ('numerator_definition', models.TextField()),
                ('denominator_definition', models.TextField(blank=True)),
                ('calculation_method', models.TextField()),
                ('target_value', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('baseline_value', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('reporting_frequency', models.CharField(help_text='Monthly/Quarterly/Annual', max_length=20)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('program', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='indicators', to='main_application.program')),
            ],
        ),
        migrations.CreateModel(
            name='Referral',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('referral_number', models.CharField(db_index=True, max_length=50, unique=True)),
                ('referral_date', models.DateTimeField(default=django.utils.timezone.now)),
                ('urgency', models.CharField(choices=[('ROUTINE', 'Routine'), ('URGENT', 'Urgent'), ('EMERGENCY', 'Emergency')], max_length=20)),
                ('reason', models.TextField()),
                ('diagnosis', models.TextField(blank=True)),
                ('treatment_given', models.TextField(blank=True)),
                ('status', models.CharField(choices=[('PENDING', 'Pending'), ('ACCEPTED', 'Accepted'), ('IN_TRANSIT', 'In Transit'), ('ARRIVED', 'Arrived'), ('COMPLETED', 'Completed'), ('CANCELLED', 'Cancelled')], default='PENDING', max_length=20)),
                ('accepted_date', models.DateTimeField(blank=True, null=True)),
                ('arrival_date', models.DateTimeField(blank=True, null=True)),
                ('completion_date', models.DateTimeField(blank=True, null=True)),
                ('outcome', models.TextField(blank=True)),
                ('feedback_to_referring_facility', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('accepted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='referrals_accepted', to=settings.AUTH_USER_MODEL)),
                ('from_facility', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='referrals_sent', to='main_application.facility')),
                ('person', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='referrals', to='main_application.person')),
                ('referred_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='referrals_made', to=settings.AUTH_USER_MODEL)),
                ('to_facility', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='referrals_received', to='main_application.facility')),
            ],
            options={
                'ordering': ['-referral_date'],
            },
        ),
        migrations.CreateModel(
            name='ReferralFollowUp',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('follow_up_date', models.DateTimeField(default=django.utils.timezone.now)),
                ('status_update', models.CharField(max_length=200)),
                ('notes', models.TextField(blank=True)),
                ('action_taken', models.TextField(blank=True)),
                ('followed_up_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('referral', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='follow_ups', to='main_application.referral')),
            ],
        ),
        migrations.CreateModel(
            name='Screening',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('screening_type', models.CharField(choices=[('TB', 'Tuberculosis'), ('HIV', 'HIV'), ('DIABETES', 'Diabetes'), ('HYPERTENSION', 'Hypertension'), ('MALNUTRITION', 'Malnutrition'), ('CERVICAL_CANCER', 'Cervical Cancer')], max_length=30)),
                ('screening_date', models.DateField()),
                ('result', models.CharField(choices=[('NEGATIVE', 'Negative'), ('POSITIVE', 'Positive'), ('INCONCLUSIVE', 'Inconclusive'), ('REFERRED', 'Referred for Further Testing')], max_length=20)),
                ('result_details', models.JSONField(blank=True, default=dict)),
                ('follow_up_required', models.BooleanField(default=False)),
                ('follow_up_date', models.DateField(blank=True, null=True)),
                ('notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('facility', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='main_application.facility')),
                ('outreach_event', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='main_application.outreachevent')),
                ('person', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='screenings', to='main_application.person')),
                ('screened_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='StaffProfile',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('cadre', models.CharField(choices=[('DOCTOR', 'Medical Doctor'), ('CLINICAL_OFFICER', 'Clinical Officer'), ('NURSE', 'Registered Nurse'), ('ENROLLED_NURSE', 'Enrolled Nurse'), ('LAB_TECH', 'Laboratory Technician'), ('PHARMACIST', 'Pharmacist'), ('PHARMACEUTICAL_TECH', 'Pharmaceutical Technician'), ('NUTRITIONIST', 'Nutritionist'), ('HEALTH_RECORDS', 'Health Records Officer'), ('PUBLIC_HEALTH_OFFICER', 'Public Health Officer')], max_length=30)),
                ('employee_number', models.CharField(max_length=50, unique=True)),
                ('qualification', models.CharField(max_length=200)),
                ('institution', models.CharField(blank=True, max_length=200)),
                ('graduation_year', models.IntegerField(blank=True, null=True)),
                ('license_number', models.CharField(blank=True, max_length=50)),
                ('licensing_body', models.CharField(blank=True, max_length=100)),
                ('license_expiry', models.DateField(blank=True, null=True)),
                ('specialization', models.CharField(blank=True, max_length=200)),
                ('years_of_experience', models.IntegerField(default=0)),
                ('employment_date', models.DateField()),
                ('employment_status', models.CharField(default='ACTIVE', max_length=20)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('primary_facility', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='primary_staff', to='main_application.facility')),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='staff_profile', to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='Stock',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('quantity', models.IntegerField(default=0, validators=[django.core.validators.MinValueValidator(0)])),
                ('batch_number', models.CharField(max_length=50)),
                ('expiry_date', models.DateField()),
                ('unit_cost', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('last_updated', models.DateTimeField(auto_now=True)),
                ('commodity', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='stocks', to='main_application.commodity')),
                ('facility', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='stocks', to='main_application.facility')),
                ('updated_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='StockTransaction',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('transaction_number', models.CharField(db_index=True, max_length=50, unique=True)),
                ('transaction_type', models.CharField(choices=[('IN', 'Stock In (Receipt)'), ('OUT', 'Stock Out (Issue)'), ('ADJUSTMENT', 'Adjustment'), ('TRANSFER', 'Transfer'), ('EXPIRED', 'Expired/Damaged')], max_length=20)),
                ('quantity', models.IntegerField()),
                ('transaction_date', models.DateTimeField(default=django.utils.timezone.now)),
                ('reference_number', models.CharField(blank=True, help_text='PO/GRN/Issue number', max_length=50)),
                ('notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='approved_transactions', to=settings.AUTH_USER_MODEL)),
                ('from_facility', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='stock_sent', to='main_application.facility')),
                ('performed_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('stock', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='transactions', to='main_application.stock')),
                ('to_facility', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='stock_received', to='main_application.facility')),
            ],
            options={
                'ordering': ['-transaction_date'],
            },
        ),
        migrations.CreateModel(
            name='SubCounty',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=100)),
                ('code', models.CharField(max_length=20, unique=True)),
                ('population', models.IntegerField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('county', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='subcounties', to='main_application.county')),
            ],
            options={
                'verbose_name_plural': 'Sub-counties',
                'ordering': ['county', 'name'],
            },
        ),
        migrations.CreateModel(
            name='MonthlyReport',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('year', models.IntegerField()),
                ('month', models.IntegerField(validators=[django.core.validators.MinValueValidator(1), django.core.validators.MinValueValidator(12)])),
                ('outpatient_visits', models.IntegerField(default=0)),
                ('inpatient_admissions', models.IntegerField(default=0)),
                ('anc_visits', models.IntegerField(default=0)),
                ('deliveries', models.IntegerField(default=0)),
                ('immunizations_given', models.IntegerField(default=0)),
                ('malaria_cases', models.IntegerField(default=0)),
                ('tb_cases', models.IntegerField(default=0)),
                ('hiv_tests', models.IntegerField(default=0)),
                ('indicators', models.JSONField(blank=True, default=dict, help_text='Indicator code: value pairs')),
                ('submission_date', models.DateTimeField(auto_now_add=True)),
                ('approved', models.BooleanField(default=False)),
                ('approval_date', models.DateTimeField(blank=True, null=True)),
                ('notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='approved_reports', to=settings.AUTH_USER_MODEL)),
                ('facility', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='monthly_reports', to='main_application.facility')),
                ('submitted_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('subcounty', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='monthly_reports', to='main_application.subcounty')),
            ],
            options={
                'ordering': ['-year', '-month'],
            },
        ),
        migrations.AddField(
            model_name='facility',
            name='subcounty',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='facilities', to='main_application.subcounty'),
        ),
        migrations.AddField(
            model_name='user',
            name='subcounty',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='main_application.subcounty'),
        ),
        migrations.CreateModel(
            name='PurchaseOrder',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('po_number', models.CharField(max_length=50, unique=True)),
                ('po_date', models.DateField(default=django.utils.timezone.now)),
                ('expected_delivery_date', models.DateField()),
                ('actual_delivery_date', models.DateField(blank=True, null=True)),
                ('items', models.JSONField(default=list, help_text='List of {commodity_id, quantity, unit_price}')),
                ('total_amount', models.DecimalField(decimal_places=2, max_digits=15)),
                ('vat_amount', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('status', models.CharField(choices=[('DRAFT', 'Draft'), ('SENT', 'Sent to Supplier'), ('CONFIRMED', 'Confirmed by Supplier'), ('PARTIAL_DELIVERY', 'Partially Delivered'), ('DELIVERED', 'Fully Delivered'), ('CANCELLED', 'Cancelled')], default='DRAFT', max_length=20)),
                ('terms_and_conditions', models.TextField(blank=True)),
                ('notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='approved_pos', to=settings.AUTH_USER_MODEL)),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('procurement_request', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='main_application.procurementrequest')),
                ('supplier', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='purchase_orders', to='main_application.supplier')),
            ],
        ),
        migrations.CreateModel(
            name='Training',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('course_name', models.CharField(max_length=200)),
                ('course_code', models.CharField(blank=True, max_length=50)),
                ('start_date', models.DateField()),
                ('end_date', models.DateField()),
                ('venue', models.CharField(max_length=200)),
                ('trainer', models.CharField(max_length=200)),
                ('training_organization', models.CharField(blank=True, max_length=200)),
                ('objectives', models.TextField()),
                ('content_summary', models.TextField(blank=True)),
                ('budget', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('organized_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='TrainingAttendance',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('attended', models.BooleanField(default=True)),
                ('attendance_percentage', models.DecimalField(decimal_places=2, default=100, max_digits=5)),
                ('pre_test_score', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('post_test_score', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('certificate_issued', models.BooleanField(default=False)),
                ('certificate_number', models.CharField(blank=True, max_length=50)),
                ('feedback', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('staff', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='main_application.staffprofile')),
                ('training', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='main_application.training')),
            ],
        ),
        migrations.AddField(
            model_name='training',
            name='attendees',
            field=models.ManyToManyField(related_name='trainings', through='main_application.TrainingAttendance', to='main_application.staffprofile'),
        ),
        migrations.CreateModel(
            name='Ward',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=100)),
                ('code', models.CharField(max_length=20, unique=True)),
                ('population', models.IntegerField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('subcounty', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='wards', to='main_application.subcounty')),
            ],
            options={
                'ordering': ['subcounty', 'name'],
            },
        ),
        migrations.CreateModel(
            name='SurveillanceReport',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('report_number', models.CharField(max_length=50, unique=True)),
                ('disease_name', models.CharField(max_length=100)),
                ('disease_code', models.CharField(blank=True, help_text='ICD code', max_length=20)),
                ('report_date', models.DateField()),
                ('reporting_period_start', models.DateField()),
                ('reporting_period_end', models.DateField()),
                ('source', models.CharField(choices=[('FACILITY', 'Health Facility'), ('CHV', 'Community Health Volunteer'), ('LABORATORY', 'Laboratory'), ('SCHOOL', 'School')], max_length=20)),
                ('cases_suspected', models.IntegerField(default=0)),
                ('cases_confirmed', models.IntegerField(default=0)),
                ('deaths', models.IntegerField(default=0)),
                ('cases_under_5', models.IntegerField(default=0)),
                ('cases_5_to_15', models.IntegerField(default=0)),
                ('cases_over_15', models.IntegerField(default=0)),
                ('males', models.IntegerField(default=0)),
                ('females', models.IntegerField(default=0)),
                ('outbreak_declared', models.BooleanField(default=False)),
                ('response_initiated', models.BooleanField(default=False)),
                ('response_details', models.TextField(blank=True)),
                ('attachments', models.JSONField(blank=True, default=list, help_text='S3 URLs to attachments')),
                ('notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('facility', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='main_application.facility')),
                ('reported_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('ward', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='surveillance_reports', to='main_application.ward')),
            ],
            options={
                'ordering': ['-report_date'],
            },
        ),
        migrations.AddField(
            model_name='outreachevent',
            name='ward',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='outreach_events', to='main_application.ward'),
        ),
        migrations.CreateModel(
            name='MortalityReport',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('death_category', models.CharField(choices=[('NEONATAL', 'Neonatal (0-28 days)'), ('INFANT', 'Infant (29 days - 1 year)'), ('CHILD', 'Child (1-5 years)'), ('MATERNAL', 'Maternal'), ('ADULT', 'Adult (15+ years)')], max_length=20)),
                ('date_of_death', models.DateField()),
                ('place_of_death', models.CharField(help_text='Home/Facility/Transit', max_length=100)),
                ('immediate_cause', models.CharField(max_length=200)),
                ('underlying_cause', models.CharField(blank=True, max_length=200)),
                ('contributing_factors', models.TextField(blank=True)),
                ('pregnancy_related', models.BooleanField(default=False)),
                ('timing', models.CharField(blank=True, help_text='During pregnancy/labor/postpartum', max_length=50)),
                ('report_date', models.DateField(default=django.utils.timezone.now)),
                ('autopsy_done', models.BooleanField(default=False)),
                ('autopsy_findings', models.TextField(blank=True)),
                ('death_certificate_issued', models.BooleanField(default=False)),
                ('notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('facility', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='main_application.facility')),
                ('reported_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('deceased_person', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='mortality_report', to='main_application.person')),
                ('ward', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='mortality_reports', to='main_application.ward')),
            ],
        ),
        migrations.AddField(
            model_name='household',
            name='ward',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='households', to='main_application.ward'),
        ),
        migrations.AddField(
            model_name='facility',
            name='ward',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='facilities', to='main_application.ward'),
        ),
        migrations.AddField(
            model_name='communityunit',
            name='ward',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='community_units', to='main_application.ward'),
        ),
        migrations.CreateModel(
            name='Campaign',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=200)),
                ('campaign_type', models.CharField(max_length=50)),
                ('start_date', models.DateField()),
                ('end_date', models.DateField()),
                ('target_area', models.CharField(help_text='Geographic scope', max_length=100)),
                ('target_population', models.IntegerField()),
                ('people_reached', models.IntegerField(default=0)),
                ('objectives', models.TextField()),
                ('activities', models.JSONField(blank=True, default=list)),
                ('budget', models.DecimalField(decimal_places=2, max_digits=12)),
                ('actual_expenditure', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('status', models.CharField(default='PLANNED', max_length=20)),
                ('final_report', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('campaign_manager', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('program', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='campaigns', to='main_application.program')),
                ('wards', models.ManyToManyField(blank=True, related_name='campaigns', to='main_application.ward')),
            ],
        ),
        migrations.AddIndex(
            model_name='communityhealthvolunteer',
            index=models.Index(fields=['national_id', 'community_unit'], name='main_applic_nationa_a1b841_idx'),
        ),
        migrations.AddIndex(
            model_name='person',
            index=models.Index(fields=['national_id', 'nhif_number'], name='main_applic_nationa_cfae1b_idx'),
        ),
        migrations.AddIndex(
            model_name='person',
            index=models.Index(fields=['household', 'is_household_head'], name='main_applic_househo_71be07_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='ancvisit',
            unique_together={('pregnancy', 'visit_number')},
        ),
        migrations.AddIndex(
            model_name='referral',
            index=models.Index(fields=['referral_number', 'status'], name='main_applic_referra_624df6_idx'),
        ),
        migrations.AddIndex(
            model_name='stock',
            index=models.Index(fields=['facility', 'commodity'], name='main_applic_facilit_8d97b2_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='stock',
            unique_together={('commodity', 'facility', 'batch_number')},
        ),
        migrations.AddIndex(
            model_name='subcounty',
            index=models.Index(fields=['county', 'code'], name='main_applic_county__f14bcd_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='subcounty',
            unique_together={('county', 'name')},
        ),
        migrations.AlterUniqueTogether(
            name='monthlyreport',
            unique_together={('facility', 'year', 'month')},
        ),
        migrations.AddIndex(
            model_name='user',
            index=models.Index(fields=['email', 'national_id'], name='main_applic_email_888463_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='trainingattendance',
            unique_together={('training', 'staff')},
        ),
        migrations.AddIndex(
            model_name='ward',
            index=models.Index(fields=['subcounty', 'code'], name='main_applic_subcoun_12c395_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='ward',
            unique_together={('subcounty', 'name')},
        ),
        migrations.AddIndex(
            model_name='surveillancereport',
            index=models.Index(fields=['disease_name', 'report_date'], name='main_applic_disease_955b47_idx'),
        ),
        migrations.AddIndex(
            model_name='household',
            index=models.Index(fields=['household_number', 'ward'], name='main_applic_househo_41d235_idx'),
        ),
        migrations.AddIndex(
            model_name='facility',
            index=models.Index(fields=['facility_code', 'ward'], name='main_applic_facilit_ff102f_idx'),
        ),
    ]
